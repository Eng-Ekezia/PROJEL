{
  "project": {
    "version": "0.8.0",
    "purpose": "Aplicação web didática para apoio ao dimensionamento de circuitos elétricos conforme ABNT NBR 5410.",
    "current_status": "Fase 08 em andamento (Refatoração e Circuitos)",
    "last_update": "2024-02-02",
    "target_audience": [
      "engenharia civil",
      "engenharia de energia",
      "estudantes de eletrotecnica"
    ],
    "constraints": {
      "cost": "zero (forever free)",
      "license": "open-source",
      "deployment": "stateless backend (free-tier friendly)",
      "privacy": "local-first (sem banco de dados no servidor)"
    },
    "core_principles": [
      "engenharia antes de calculo",
      "contexto antes de circuito",
      "norma como regra explicita e auditavel",
      "usuario descreve a realidade, sistema traduz para a norma",
      "rastreabilidade total das decisoes"
    ],
    "history": [
      {
        "date": "2026-01-XX",
        "event": "Início do desenvolvimento (Fases 01-06)",
        "details": "Configuração do ambiente, Backend FastAPI, Estrutura inicial."
      },
      {
        "date": "2026-02-01",
        "event": "Migração de UI e Modelagem Core (Fase 07)",
        "details": "Substituição total do Material UI pelo shadcn/ui + Tailwind CSS v3. Implementação estrita das entidades Zona, Local e Carga. Criação dos Wizards NBR 5410."
      },
      {
        "date": "2026-02-02",
        "event": "Problemas Enfrentados e Soluções (Documentation)",
        "details": [
          "PROBLEMA: Incompatibilidade entre Vite e Tailwind v4. SOLUÇÃO: Downgrade para Tailwind v3.4 e configuração manual do PostCSS.",
          "PROBLEMA: Arquivo ProjectDetails.tsx tornou-se um 'God Object' (monolítico). SOLUÇÃO: Planejamento de refatoração modular para a Fase 08.",
          "PROBLEMA: Definição de Zona incompleta (faltava Categoria C - Construção). SOLUÇÃO: Atualização dos Types e UI para conformidade total com NBR 5410.",
          "PROBLEMA: Visual quebrado por CSS residual do Vite. SOLUÇÃO: Limpeza do App.css e reset global no index.css."
        ]
      }
    ]
  },
  "technology_stack": {
    "frontend": {
      "framework": "React",
      "language": "TypeScript (Strict Mode / VerbatimModuleSyntax)",
      "bundler": "Vite (Composite Mode)",
      "ui_library": "Change from Material UI (MUI) v6 to shadcn/ui + Tailwind CSS v3.4 in phase 07",
      "state_management": "Zustand + Persist Middleware (LocalStorage)"
    },
    "backend": {
      "framework": "FastAPI",
      "language": "Python",
      "python_version": ">=3.11",
      "architecture": "Stateless (Calculation Engine)"
    },
    "database": {
      "type": "None (Server-side) / LocalStorage (Client-side)",
      "usage": [
        "persistencia no navegador do usuario via Zustand",
        "exportacao/importacao via JSON",
        "total privacidade de dados"
      ]
    },
    "deployment": {
      "frontend": "Vercel",
      "backend": "Render (Web Service)"
    }
  },
  "roadmap": [
    {
      "phase": "00",
      "name": "Congelamento conceitual e Arquitetural",
      "objective": "Definir limites do sistema e estrategia de dados",
      "outputs": [
        "decisao por arquitetura stateless",
        "modelo de dados JSON portavel",
        "alinhamento com NBR 5410"
      ],
      "status": "concluido"
    },
    {
      "phase": "01",
      "name": "Preparacao do ambiente",
      "objective": "Criar ambiente reprodutivel",
      "steps": [
        "Python 3.11+",
        "Node.js (LTS)",
        "Configuracao de VENV",
        "Instalacao de dependencias (FastAPI, Pydantic, Uvicorn)"
      ],
      "deliverable": "Ambiente local configurado",
      "status": "concluido"
    },
    {
      "phase": "02",
      "name": "Organizacao do Monorepo",
      "objective": "Estrutura de codigo limpa e separada por responsabilidade",
      "details": {
        "repository": {
          "type": "monorepo",
          "structure": [
            "/frontend",
            "/backend",
            "/domain_core",
            "/docs"
          ]
        },
        "git_strategy": {
          "gitignore": "unificado (python + node)",
          "branching": "main based"
        }
      },
      "deliverable": "Repositorio Git inicializado com estrutura de pastas",
      "status": "concluido"
    },
    {
      "phase": "03",
      "name": "Configuracao do Backend Stateless",
      "objective": "Criar API de processamento puro (sem persistencia)",
      "principles": [
        "API nao salva estado",
        "API recebe Projeto -> Devolve Resultado",
        "Validacao forte na entrada (Pydantic)"
      ],
      "initial_endpoints": [
        "/health",
        "/version",
        "/v1/calcular/dimensionamento",
        "/v1/calcular/demanda"
      ],
      "deliverable": "API rodando com Swagger/OpenAPI",
      "status": "concluido"
    },
    {
      "phase": "04",
      "name": "Configuracao do Frontend & Estado Global",
      "objective": "Criar base de UX e gerenciador de estado persistente",
      "principles": [
        "Linguagem humana",
        "Feedback imediato",
        "Persistencia automatica no navegador"
      ],
      "milestones": [
        "Integracao do Zustand para gerenciamento de estado global",
        "Configuracao rigorosa do TypeScript (Composite Mode / noEmit)",
        "Resolucao de conflitos de importacao de tipos (VerbatimModuleSyntax)",
        "Dashboard de Projetos funcional com CRUD basico"
      ],
      "deliverable": "Frontend React inicializado com Store Zustand persistente",
      "status": "concluido"
    },
    {
      "phase": "05",
      "name": "Modelagem do dominio eletrico (Core)",
      "objective": "Traduzir NBR 5410 para classes Python ricas e interfaces TS",
      "schemas": {
        "ProjetoEletrico": "Concluido",
        "ZonaDeInfluencia": "Concluido (com Presets)",
        "Local": "Concluido (Validacao Geometrica)",
        "Circuito": "Pendente"
      },
      "rules": [
        "Validacao de Potencia vs Corrente (Mutuamente Exclusivos)",
        "Heranca de influencias da zona para os circuitos"
      ],
      "deliverable": "Modulo domain_core auditado e Interfaces TS sincronizadas",
      "status": "concluido"
    },
    {
      "phase": "06",
      "name": "UX de Contexto e Presets Normativos",
      "objective": "Facilitar a entrada de dados com modelos da NBR 5410 (Zonas e Locais)",
      "features": [
        "Presets de Zonas (Residencial, Comercial)",
        "Wizard de Criacao de Zonas e Locais",
        "Edicao e Exclusao de Entidades",
        "Validacao visual de status (Preset vs Custom)"
      ],
      "deliverable": "Interface de Zonas e Locais funcional e auditavel",
      "status": "concluido"
    },
    {
      "phase": "07",
      "name": "Modelagem de Cargas e Migração UI",
      "objective": "Implementar hierarquia Zona > Local > Carga e modernizar interface",
      "features": [
        "Migração completa para shadcn/ui + TailwindCSS",
        "CRUD de Zonas com classificação NBR 5410 (Ambiente, Pessoas, Construção)",
        "CRUD de Locais com Perfil Normativo (Cozinha, Banheiro, Padrão)",
        "CRUD de Cargas com distinção de origem (Usuário vs Norma)",
        "Wizard de Sugestão Automática de Cargas (NBR 5410 Cap. 9)"
      ],
      "deliverable": "Interface moderna e dados estruturados prontos para agrupamento",
      "status": "concluido"
    },
    {
      "phase": "08",
      "name": "Refatoração Modular e Circuitos",
      "objective": "Dividir o monolito de UI e implementar a lógica de agrupamento de circuitos",
      "branch_suggested": "feat/phase-08-circuits-refactor",
      "features": [
        "8.1 REFATORAÇÃO: Quebrar ProjectDetails.tsx em componentes (ZoneTab, LocalTab, CargaTab)",
        "8.2 PROJETO: Implementar Edição e Deleção de Projetos (CRUD Completo)",
        "8.3 ZONAS: Implementar Wizard Assistido (Perguntas e Respostas) e Presets conforme ux_presets_zonas.md",
        "8.4 CARGAS: Implementar Adição em Lote (Grid/Planilha) para alta produtividade",
        "8.5 CIRCUITOS: Implementar entidade 'Proposta de Circuito'",
        "8.6 CIRCUITOS: UI de Drag-and-Drop para agrupar cargas em circuitos"
      ],
      "deliverable": "Módulo de criação de circuitos funcional e código limpo",
      "status": "em_andamento"
    },
    {
      "phase": "09",
      "name": "Motor de Dimensionamento",
      "objective": "Cálculo de condutores e proteções",
      "features": [
        "Aplicação de Fatores de Agrupamento e Temperatura (FCT, FCA)",
        "Seleção de método de instalação (Ref. NBR 5410)",
        "Cálculo de corrente de projeto (IB) e disjuntor (IN)",
        "Verificação de Queda de Tensão (%)"
      ],
      "output_schema": {
        "ResultadoDimensionamento": {
          "corrente_projeto": "number",
          "secao_condutor_mm2": "number",
          "dispositivo_protecao": "string",
          "memoria_calculo": "string[]"
        }
      },
      "deliverable": "Endpoint de calculo retornando resultados corretos + Memorial de cálculo automatizado",
      "status": "pendente"
    },
    {
      "phase": "10",
      "name": "Modulo de demanda",
      "objective": "Calculo independente por concessionaria",
      "initial_provider": "CEMIG (ND-5.1)",
      "deliverable": "Calculadora de demanda anexada ao projeto",
      "status": "pendente"
    },
    {
      "phase": "11",
      "name": "Persistencia Local e Portabilidade",
      "objective": "Gerenciar dados sem servidor",
      "features": [
        "Exportar JSON: Baixar projeto para backup/compartilhamento",
        "Importar JSON: Carregar projeto de colega/professor"
      ],
      "deliverable": "Sistema de Arquivos Virtual no Frontend",
      "status": "parcialmente_concluido"
    },
    {
      "phase": "12",
      "name": "Testes e Validacao",
      "objective": "Garantia de qualidade didatica",
      "tests": [
        "Unitarios: Formulas da NBR",
        "Integracao: Frontend -> Backend -> Frontend",
        "End-to-End: Fluxo completo de um projeto residencial"
      ],
      "deliverable": "Suite de testes verde",
      "status": "pendente"
    },
    {
      "phase": "13",
      "name": "Deploy e Documentacao",
      "objective": "Lancar versao publica",
      "deploy_strategy": {
        "Backend": "Render Free Tier (Stateless)",
        "Frontend": "Vercel (Global CDN)"
      },
      "docs": [
        "Manual do Usuario",
        "Nota Tecnica sobre as simplificacoes assumidas"
      ],
      "deliverable": "URL publica acessivel",
      "status": "pendente"
    }
  ]
}